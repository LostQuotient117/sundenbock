<h2 class="card-title text-center">Anmelden</h2>

<form class="card-body gap-4" [formGroup]="form" (ngSubmit)="submit()">
  <!-- Benutzername -->
  <div class="form-control">
    <label class="label">
      <span class="label-text">Benutzername</span>
    </label>
    <input
      type="text"
      class="input input-bordered w-full"
      formControlName="username"
      autocomplete="username"
    />
    @if (form.controls.username.touched && form.controls.username.invalid) {
      <span class="text-error text-sm mt-1">Benutzername ist erforderlich.</span>
    }
  </div>

  <!-- Passwort -->
  <div class="form-control">
    <label class="label">
      <span class="label-text">Passwort</span>
    </label>
    <input
      type="password"
      class="input input-bordered w-full"
      formControlName="password"
      autocomplete="current-password"
    />
    @if (form.controls.password.touched && form.controls.password.invalid) {
      <span class="text-error text-sm mt-1">Passwort ist erforderlich.</span>
    }
  </div>

  <!-- Checkbox -->
  <label class="label cursor-pointer justify-start gap-3">
    <input type="checkbox" class="checkbox" formControlName="rememberMe" />
    <span class="label-text">Angemeldet bleiben</span>
  </label>

  <!-- Server-Fehler -->
  @if (serverError()) {
    <div class="text-error text-center font-medium">{{ serverError() }}</div>
  }

  <!-- Submit -->
  <div class="form-control mt-2">
    <button
      type="submit"
      class="btn btn-primary"
      [class.loading]="submitting()"
      [disabled]="submitting() || form.invalid"
    >
      {{ submitting() ? 'Anmeldenâ€¦' : 'Anmelden' }}
    </button>
  </div>

  <div class="divider my-0"></div>

  <p class="text-sm text-base-content/70 text-center">
    Kein Konto?
    <a class="link link-primary" routerLink="/auth/register">Registrieren</a>
  </p>
</form>
